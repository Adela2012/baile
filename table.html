<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <!-- <script src="jquery-1.11.1.js"> </script> -->
  <script src="http://code.jquery.com/jquery-latest.js"></script>
  <link  href="http://libs.baidu.com/bootstrap/3.0.3/css/bootstrap.min.css"  rel="stylesheet"   />
  <!-- <link rel="stylesheet" href="bootstrap.css"/> -->
  <title>Document</title>
  <script>
     function changeColor(){
       $("tr:not(:first):not(:last):even").css({background: "#efefef"});
       $("tr:not(:first):not(:last):odd").css({background: "#fff"});
     }
     function buttonColor(){
       $("input[type='button']").addClass("btn btn-xs ");
       $("input[value='修改']").addClass("btn-success ");
       $("input[value='删除']").addClass("btn-danger ");
       $("input[value='增加']").addClass("btn-info ");
     }

     function initial(){
         changeColor();
         //增加按钮事件
         $("input[value='增加']").click(
           function(){
               var bName=$("#book").val();
               var bPrice=$("#price").val();
               var bStorage=$("#storage").val();
               
               //增加tr和td
               var $td1=$("<td>"+bName+"</td>");
               var $td2=$("<td>"+bPrice+"</td>");
               var $td3=$("<td>"+bStorage+"</td>");
               var $td4=$("<td></td>");

               var $update=$($("input[value='修改']").get(0)).clone(true);
               var $delete=$($("input[value='删除']").get(0)).clone(true);
               $td4.append($update);
               $td4.append(" ");
               $td4.append($delete);
               
               var $tr=$("<tr></tr>");
               //将td添加到tr中
               $tr.append($td1);
               $tr.append($td2);
               $tr.append($td3);
               $tr.append($td4);
               //将tr添加到最后一行
               $("tr:last").before($tr);
               $("#book").val('');
               $("#price").val('');
               $("#storage").val('');
               changeColor();
           }
         );
         //删除按钮事件
         $("input[value='删除']").click(
            function(e){
               $(this).parent().parent().remove();
               changeColor();
            }
            
         );

         //修改按钮事件
        $("input[value='修改']").click(
            function(){
               if($(this).val()=="修改"){
                   $(this).val("确定");
                   var tds= $(this).parent().siblings();
                   for(var i=0;i<tds.length;i++){
                       var $td=$(tds[i]);
                       $td.html("<input value="+$td.text()+">");
                   }

               }else{
                  $(this).val("修改");
                   var tds= $(this).parent().siblings();
                   for(var i=0;i<tds.length;i++){
                       var $td=$(tds[i]);
                       var $ipt=$($td.children()[0]);
                       $td.text($ipt.val());
                   }
               }
            }
         );

     }
     window.onload=function(){
         initial();
         buttonColor();
     }
  </script>
 </head>
 <body>
  <table class="table table-bordered  ">
     <thead>
       <td>书名</td>
       <td>价格</td>
       <td>库存</td>
       <td>操作</td>
     </thead>
     <tr>
       <td>红楼梦</td>
       <td>48</td>
       <td>20</td>
       <td>
         <input type="button"  value="修改">
         <input type="button"  value="删除">
       </td>
     </tr>
     <tr>
       <td>水浒传</td>
       <td>48</td>
       <td>20</td>
       <td>
         <input type="button" value="修改">
         <input type="button" value="删除">
       </td>
     </tr>
     <tr>
       <td>丑小鸭</td>
       <td>48</td>
       <td>20</td>
       <td>
         <input type="button" value="修改">
         <input type="button" value="删除">
       </td>
     </tr>
     <tr>
       <td>西游记</td>
       <td>25</td>
       <td>42</td>
       <td>
         <input type="button" value="修改">
         <input type="button" value="删除">
       </td>
     </tr>
     <tfoot>
       <td><input type="text" id="book"></td>
       <td><input type="text" id="price"></td>
       <td><input type="text" id="storage"></td>
       <td>
          <input type="button" value="增加">
       </td>
     </tfoot>
  </table>
 </body>
</html>